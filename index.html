<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <meta charset="UTF-8">
    <title>IoT-Pen Framework Showcase</title>

</head>

<body>
    <input type="text" id="ips" value="127.0.0.1"></inpu>
    <button id="send-ips">Send IP-Addresses</button>

    <div class="container">
        <h2>Results</h2>
    </div>
</body>

</html>
<script type="module">
    async function fetchData(url) {
        document.getElementById("send-ips").addEventListener("click", sendData);
        var valueToSend = "127.0.0.1";
        retrieve_Data();
        function sendData() {
            // Get the value you want to send

            var adresses = document.getElementById("ips");
            if (button.value) {
                valueToSend = adresses.value
            }
            // Make a POST request to the server
            fetch("http://localhost:5000/api/ips", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ IP: valueToSend })
            })
                .then(response => {
                    if (response.ok) {
                        console.log("Value sent successfully!");
                        retrieve_Data();
                    } else {
                        console.error("Error sending value:", response.statusText);
                    }
                })
                .catch(error => {
                    console.error("Error sending value:", error);
                });
        }
        var temp;
        async function retrieve_Data() {
            try {
                const response = await axios.get(url);
                // Handle the response data

                temp = response.data;
                //console.log(temp);
                const container = document.getElementsByClassName("container")[0];

                for (let i = 0; i < array.length; i++) {
                    if ((i + 1) % 4 === 1) {
                        const h3 = document.createElement("h3")
                        h3.textContent = element;
                        container.appendChild(h3);
                    } else if ((i + 1) % 4 === 2) {
                        const para = document.createElement("p")
                        para.textContent = element;
                        container.appendChild(para);
                    } else if ((i + 1) % 4 === 3) {
                        const para = document.createElement("p")
                        para.textContent = element;
                        container.appendChild(para);
                    } else {
                        // Action for fourth entry in each set
                        console.log("Fourth entry:", array[i]);
                    }
                }

            } catch (error) {
                // Handle any errors
                console.error('Error:', error);
            }
        }

    }

    // Usage
    const url = 'http://localhost:5000/api/json';
    fetchData(url);


</script>