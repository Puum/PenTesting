import subprocess

def install_nmap():
    # Check if Nmap is already installed
    try:
        subprocess.run(['nmap', '--version'], stdout=subprocess.PIPE, stderr=subprocess.PIPE, check=True)
        print("Nmap is already installed")
    except subprocess.CalledProcessError:
        # Nmap is not installed, proceed with installation
        try:
            subprocess.run(['sudo', 'apt-get', 'update'], check=True)
            subprocess.run(['sudo', 'apt-get', 'install', '-y', 'nmap'], check=True)
            print("Nmap installed successfully")
        except subprocess.CalledProcessError as e:
            print(f"Error installing Nmap: {e.stderr.decode().strip()}")

def run_nmap_scan(target):
    try:
        result = subprocess.run(['nmap', '-sn', target], stdout=subprocess.PIPE, stderr=subprocess.PIPE, check=True, text=True)
        output = result.stdout.strip()
        print(output)
    except subprocess.CalledProcessError as e:
        print(f"Error running Nmap scan: {e.stderr.decode().strip()}")

# Example usage
target = "192.168.0.1"  # Replace with your target IP or hostname

install_nmap()
run_nmap_scan(target)
